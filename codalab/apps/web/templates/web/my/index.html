{% extends 'base.html' %}
{% block title %}My CodaLab{% endblock %}
{% block content %}
<div class="row">
    <div class="large-10 columns">
        <div class="section-container auto competitionsDetailTabArea " data-section data-section-resized>
          <section>
            <p class="title active" id="participating" data-section-title>
                <a href="#participate">Competitions I'm Participating In</a>
            </p>
            <div class="content" data-section-content>
                <div class="my_participating">
                    {% include "web/my/_entered.html" with competitions=competitions_im_in %}
                </div>
            </div>
          </section>
          <section>
            <p class="title" id="managed" data-section-title>
                <a href="#manage">Competitions I'm Running</a>
            </p>
            <div class="content" data-section-content>
                <div class="row">
                    <div class="large-9 push-3 columns ">
                        {% include "web/my/_managed.html" with competitions=my_competitions %}
                    </div>
                    <div class="large-3 pull-9 columns">
                        <a href="/my/create_competition"><button class="globalBlueButtonSmall">Create Competition</button></a>
                    </div>
                </div>
            </div>
          </section>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}

function deleteCompetition(competition) {
    console.log("Delete Competition! "+competition);
    url = "/api/competition/"+competition;
    request = $.ajax({
        url: url,
        type: "delete",
        datatype: 'text',
        success: function(response, textStatus, jqXHR) {
                        alert("Submitted!");
                    },
        error: function(jsXHR, textStatus, errorThrown) {
                        alert("Submission Failed ("+errorThrown+": "+textStatus);
                    },
        beforeSend: function(xhr) {
            xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
            }
    });
};

$('document').ready(function() {
    // This helps make sections appear with Foundation
    $(this).foundation('section', 'reflow');
});
{% endblock js %}
